{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nike's Catering Services</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'css/main.css' %}">
  <link rel="stylesheet" href="{% static 'css/navbar.css' %}">
  <link rel="stylesheet" href="{% static 'css/chatbot.css' %}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  
  <!-- <link rel="icon" type="image/x-icon" href="{% static 'images/soireelogo-l.svg' %}"> -->


</head>

<body>

  <!-- NAV BAR -->
  {% include "navbar.html" %}

  <!-- CONTENT -->

  <!-- MAIN -->
  <header id="main">
    <img src="https://res.cloudinary.com/dzjrdqkiw/image/upload/v1758442112/soireelogo-l_eazlvf.svg" alt="The Soiree Logo" class="logo">
    <h1>Nike's Catering Services</h1>
    <p>Nikes Catering Services brings your events to life with exceptional food, elegant styling, and professional
      coordination. Whether it's an intimate gathering or a grand celebration, we specialize in crafting memorable
      experiences tailored to your vision. With a commitment to quality and creativity, we handle every detail—so you
      can enjoy the moment. </p>
    <a href="#about-us" class="learnmore">LEARN MORE</a>
  </header>

  <!-- CHATBOT BUTTON -->
  {% if user.is_authenticated %}
  <a href="{% url 'chatbot' %}" id="chat-ai-btn" class="chat-ai-btn">
    <i class="fa-solid fa-comments"></i>
    <span>Ask Patrice</span>
  </a>
  {% endif %}

  <!-- FLOATING DOWNLOAD BANNER -->
  <div id="floating-banner" class="floating-banner">
    <div class="banner-content">
      <div class="banner-logo">
        <img src="{% static 'images/CLogo-Notext.png' %}" alt="Soiree Logo" class="banner-logo-img">
      </div>
      <div class="banner-text">
        <div class="banner-title">
          <span class="download-text">DOWNLOAD</span>
          <span class="app-text">THE APP NOW!</span>
        </div>
        <div class="banner-subtitle">
          Book your events conveniently anytime, anywhere.
        </div>
      </div>
      <div class="banner-download">
        <a href="https://drive.google.com/uc?export=download&id=1RbqxenA-kVvVdjgGeLFZzAF5rlpZAsg8" class="download-icon" aria-label="download icon expanded">
          <i class="fas fa-download"></i>
        </a>
      </div>
    </div>
    <div class="banner-minimized">
      <a href="https://drive.google.com/uc?id=1BhXDuUqR79qebFQWRNUrEGx-VNbd9NFq&export=download" class="download-icon-mini" aria-label="download icon collapsed">
        <i class="fas fa-download"></i>
      </a>
    </div>
  </div>

<!-- OUR SERVICES -->
<section id="services">
  <img src="https://res.cloudinary.com/dzjrdqkiw/image/upload/v1758442104/servicesseparator_mal0bv.png" alt="Services Separator" class="services-separator">
  <h1 class="services-title">OUR SERVICES</h1>
  <p>We offer full-service catering, event styling, and coordination tailored to your unique needs.</p>

  <div class="services-row">
    <div class="service-card" data-event="Kiddie Party" data-bg-url="{% static 'images/upgraded balloon set-up/R6A.jpg' %}">
      <div class="overlay"></div>
      <h2>Kiddie Party</h2>
      <div class="arrow"><i class="fa-solid fa-chevron-down"></i></div>
    </div>

    <div class="service-card" data-event="Birthday" data-bg-url="{% static 'images/birthday/greengold.jpg' %}">
      <div class="overlay"></div>
      <h2>Birthday</h2>
      <div class="arrow"><i class="fa-solid fa-chevron-down"></i></div>
    </div>

    <div class="service-card" data-event="Wedding" data-bg-url="{% static 'images/signature set-up/R4A.jpg' %}">
      <div class="overlay"></div>
      <h2>Wedding</h2>
      <div class="arrow"><i class="fa-solid fa-chevron-down"></i></div>
    </div>

    <div class="service-card" data-event="Christening" data-bg-url="{% static 'images/christening/bears.jpg' %}">
      <div class="overlay"></div>
      <h2>Christening</h2>
      <div class="arrow"><i class="fa-solid fa-chevron-down"></i></div>
    </div>

    <div class="service-card" data-event="Custom Event" data-bg-url="{% static 'images/corporate/yellowblack.jpg' %}">
      <div class="overlay"></div>
      <h2>Custom Event</h2>
      <div class="arrow"><i class="fa-solid fa-chevron-down"></i></div>
    </div>
  </div>


  <!-- DROPDOWNS BELOW THE CARDS -->
  <div id="service-dropdowns">

    <!-- KIDDIE -->
    <div class="service-dropdown" id="dropdown-kiddie" style="display: none;">
      <div class="service-grid">
        <div class="side-images left">
          <img class="side-img" src="{% static 'images/upgraded balloon set-up/R1A.jpg' %}" alt="Kiddie side 1">
          <img class="side-img" src="{% static 'images/upgraded balloon set-up/R3A.jpg' %}" alt="Kiddie side 2">
        </div>
        <div class="package-col">
          <div class="package-slider">
            <button class="pkg-prev">❮</button>
            <img class="pkg-image" src="{% static 'images/packages/kiddie party/50pax.jpg' %}" alt="Kiddie Party">
            <button class="pkg-next">❯</button>
          </div>
        </div>
        <div class="side-images right">
          <img class="side-img" src="{% static 'images/upgraded balloon set-up/R5A.jpg' %}" alt="Kiddie side 3">
          <img class="side-img" src="{% static 'images/upgraded balloon set-up/R6A.jpg' %}" alt="Kiddie side 4">
        </div>
      </div>
    </div>

    <!-- BIRTHDAY -->
    <div class="service-dropdown" id="dropdown-birthday" style="display: none;">
      <div class="service-grid">
        <div class="side-images left">
          <img class="side-img" src="{% static 'images/upgraded balloon set-up/R9A.jpg' %}" alt="Birthday side 1">
          <img class="side-img" src="{% static 'images/upgraded balloon set-up/R10A.jpg' %}" alt="Birthday side 2">
        </div>
        <div class="package-col">
          <div class="package-slider">
            <button class="pkg-prev">❮</button>
            <img class="pkg-image" src="{% static 'images/packages/birthday/50pax.jpg' %}" alt="Birthday">
            <button class="pkg-next">❯</button>
          </div>
        </div>
        <div class="side-images right">
          <img class="side-img" src="{% static 'images/minimalist set-up/R1A.jpg' %}" alt="Birthday side 3">
          <img class="side-img" src="{% static 'images/minimalist set-up/R4A.jpg' %}" alt="Birthday side 4">
        </div>
      </div>
    </div>

    <!-- WEDDING -->
    <div class="service-dropdown" id="dropdown-wedding" style="display: none;">
      <div class="service-grid">
        <div class="side-images left">
          <img class="side-img" src="{% static 'images/minimalist set-up/R2A.jpg' %}" alt="Wedding side 1">
          <img class="side-img" src="{% static 'images/minimalist set-up/R3A.jpg' %}" alt="Wedding side 2">
        </div>
        <div class="package-col">
          <div class="package-slider">
            <button class="pkg-prev">❮</button>
            <img class="pkg-image" src="{% static 'images/packages/wedding/50pax.jpg' %}" alt="Wedding">
            <button class="pkg-next">❯</button>
          </div>
        </div>
        <div class="side-images right">
          <img class="side-img" src="{% static 'images/minimalist set-up/R5A.jpg' %}" alt="Wedding side 3">
          <img class="side-img" src="{% static 'images/minimalist set-up/R8A.jpg' %}" alt="Wedding side 4">
        </div>
      </div>
    </div>

    <!-- CHRISTENING -->
    <div class="service-dropdown" id="dropdown-christening" style="display: none;">
      <div class="service-grid">
        <div class="side-images left">
          <img class="side-img" src="{% static 'images/upgraded balloon set-up/R2A.jpg' %}" alt="Christening side 1">
          <img class="side-img" src="{% static 'images/upgraded balloon set-up/R2D.jpg' %}"  alt="Christening side 2">
        </div>
        <div class="package-col">
          <div class="package-slider">
            <button class="pkg-prev">❮</button>
            <img class="pkg-image" src="{% static 'images/packages/christening/50pax.jpg' %}" alt="Christening">
            <button class="pkg-next">❯</button>
          </div>
        </div>
        <div class="side-images right">
          <img class="side-img" src="{% static 'images/upgraded balloon set-up/R4A.jpg' %}"  alt="Christening side 3">
          <img class="side-img" src="{% static 'images/upgraded balloon set-up/R4D.jpg' %}"  alt="Christening side 4">
        </div>
      </div>
    </div>

    <!-- CUSTOM -->
    <div class="service-dropdown" id="dropdown-custom" style="display: none;">
      <div class="service-grid">
        <div class="side-images left">
          <img class="side-img" src="https://res.cloudinary.com/dzjrdqkiw/image/upload/v1758441906/gawad_zkqk8o.jpg" alt="Custom side 1">
          <img class="side-img" src="https://res.cloudinary.com/dzjrdqkiw/image/upload/v1758441906/reunion_hhfvrl.jpg " alt="Custom side 2">
        </div>
        <div class="package-col">
          <div class="package-slider">
            <button class="pkg-prev">❮</button>
            <img class="pkg-image" src="https://res.cloudinary.com/dzjrdqkiw/image/upload/v1758441906/reunion_hhfvrl.jpg" alt="Custom Event">
            <button class="pkg-next">❯</button>
          </div>
        </div>
        <div class="side-images right">
          <img class="side-img" src="{% static 'images/corporate/orangeyellow.png' %}" alt="Custom side 3">
          <img class="side-img" src="{% static 'images/corporate/yellowblack.jpg' %}"alt="Custom side 4">
        </div>
      </div>
    </div>
  </div>
</section>


  <!-- MENU -->
  <section id="menu">
    <div class="menu-content">
      <div class="menu-left">
        <h3 class="menu-subtitle">NIKE'S CATERING SERVICES</h3>
        <h2 class="menu-title">Featured Menu</h2>
        
        <div class="menu-items">
          <div class="menu-item">
            <div class="menu-item-header">
              <span class="menu-item-name">Beef Brocolli</span>
              <!-- <span class="menu-item-price">$20</span> -->
            </div>
            <p class="menu-item-description">Tender beef slices sautéed with fresh broccoli in a savory sauce.</p>
          </div>
          
          <div class="menu-item">
            <div class="menu-item-header">
              <span class="menu-item-name">Honey Glazed Chicken</span>
              <!-- <span class="menu-item-price">$25</span> -->
            </div>
            <p class="menu-item-description">Crispy chicken coated with a sweet honey glaze for a rich flavor.</p>
          </div>
          
          <div class="menu-item">
            <div class="menu-item-header">
              <span class="menu-item-name">Kare-Kare Bagnet</span>
              <!-- <span class="menu-item-price">$27</span> -->
            </div>
            <p class="menu-item-description">Crispy pork belly served with peanut sauce and vegetables.</p>
          </div>
          
          <div class="menu-item">
            <div class="menu-item-header">
              <span class="menu-item-name">Mixed Seafoods with Vegetables</span>
              <!-- <span class="menu-item-price">$18</span> -->
            </div>
            <p class="menu-item-description">A medley of shrimp, squid, and fish cooked with fresh vegetables.</p>
          </div>
          
          <div class="menu-item">
            <div class="menu-item-header">
              <span class="menu-item-name">Pot Roast Beef</span>
              <!-- <span class="menu-item-price">$19</span> -->
            </div>
            <p class="menu-item-description">Slow-cooked beef roast in a rich, flavorful gravy sauce.</p>
          </div>
        </div>
      </div>

      <div class="menu-right">
        <div class="menu-images">
          <div class="menu-image-large">
            <img src="https://res.cloudinary.com/dzjrdqkiw/image/upload/v1757782677/beefbroccolli_c3hbve.jpg" alt="Beef Broccoli" class="food-image">
          </div>
          <div class="menu-images-small">
            <div class="menu-image-small">
              <img src="https://res.cloudinary.com/dzjrdqkiw/image/upload/v1757783624/karekarebagnet_paezmf.jpg" alt="Karekare Bagnet" class="food-image">
            </div>
            <div class="menu-image-small">
              <img src="https://res.cloudinary.com/dzjrdqkiw/image/upload/v1757784415/honeyglazedchicken_d4evdv.jpg" alt="Honey Glazed Chicken" class="food-image">
            </div>
          </div>
          <div class="menu-button-container">
           <a href="{% url 'menu' %}" class="view-menu-btn" aria-label="menu button"><i class="fas fa-utensils"></i> View Menu</a>
          </div>
        </div>
      </div>  
    </div>
  </section>


  <!-- PACKAGES -->
  <section id="packages">
    <div class="packages-header">
      <hr class="line left">
      <h1>EVENT PACKAGES</h1>
      <hr class="line right">
    </div>
    <p class="packages-subtitle">Our event packages are designed to fit every occasion, combining catering, styling, and
      coordination into convenient, customizable bundles.</p>

    <div class="packages-grid-new">
      <!-- Package A -->
      <div class="package-card">
        <div class="package-header">
          <h3 class="package-name">Package A</h3>
        </div>
        <div class="package-content">
          <ul class="package-features">
            <li><i class="fas fa-check"></i> Choice of 3 Dishes</li>
            <li><i class="fas fa-check"></i> Steamed Rice</li>
            <li><i class="fas fa-check"></i> Choice of 1 Pasta</li>
            <li><i class="fas fa-check"></i> Choice of 1 Drink</li>
            <li><i class="fas fa-check"></i> Dessert Buffet</li>
          </ul>
        </div>
      </div>

      <!-- Package B -->
      <div class="package-card">
        <div class="package-header">
          <h3 class="package-name">Package B</h3>
        </div>
        <div class="package-content">
          <ul class="package-features">
            <li><i class="fas fa-check"></i> Choice of 4 Dishes</li>
            <li><i class="fas fa-check"></i> Steamed Rice</li>
            <li><i class="fas fa-check"></i> Choice of 1 Pasta</li>
            <li><i class="fas fa-check"></i> Choice of 1 Drink</li>
            <li><i class="fas fa-check"></i> Dessert Buffet</li>
          </ul>
        </div>
      </div>

      <!-- Package C -->
      <div class="package-card">
        <div class="package-header">
          <h3 class="package-name">Package C</h3>
        </div>
        <div class="package-content">
          <ul class="package-features">
            <li><i class="fas fa-check"></i> Choice of 5 Dishes</li>
            <li><i class="fas fa-check"></i> Steamed Rice</li>
            <li><i class="fas fa-check"></i> Choice of 1 Pasta</li>
            <li><i class="fas fa-check"></i> Choice of 1 Drink</li>
            <li><i class="fas fa-check"></i> Dessert Buffet</li>
          </ul>
        </div>
      </div>
    </div>

    <div class="packages-note">
      <p><i class="fas fa-info-circle"></i> Prices, inclusions, and add-ons vary depending on event type.</p>
    </div>

    <div class="packages-actions">
      <a href="#services" class="explore-btn" aria-label="explore packages button" onclick="openKiddieDropdown()">
        <i class="fas fa-gift"></i>
        Explore Packages
      </a>
      <a href="{% url 'menu' %}" class="explore-btn" aria-label="explore menu button">
        <i class="fas fa-utensils"></i>
        Explore Menu
      </a>
    </div>
  </section>

  <!-- DESIGN -->
  <section id="design">
    <div class="design-hero">
      <div class="design-hero-content">
        <div class="design-image">
          <img src="https://res.cloudinary.com/dzjrdqkiw/image/upload/v1758442090/eventprep_plo13r.jpg" alt="Our Design Story">
        </div>
        <div class="design-story">
          <div class="design-story-header">
            <hr class="story-line">
            <span class="story-subtitle">OUR DESIGN</span>
            <hr class="story-line">
          </div>
          <h2 class="design-title">Why is it special?</h2>
          <p class="design-description">We bring your vision to life with creative themes and personalized event designs that reflect your style. From elegant to playful, every detail is crafted to create a cohesive and memorable atmosphere.</p>
          <div class="design-features">
            <div class="feature-item">
              <i class="fas fa-check"></i>
              <span>Themed Backdrop</span>
            </div>
            <div class="feature-item">
              <i class="fas fa-check"></i>
              <span>Minimalist Setup</span>
            </div>
            <div class="feature-item">
              <i class="fas fa-check"></i>
              <span>Signature Setup</span>
            </div>
            <div class="feature-item">
              <i class="fas fa-check"></i>
              <span>Custom Design</span>
            </div>
          </div>
          <a href="{% url 'moredesign' %}" class="learn-more-btn" aria-label="view designs button">VIEW DESIGNS</a>
        </div>
      </div>
    </div>

    <div class="design-categories">
      <h3 class="categories-title">Our Design Categories</h3>

      <div class="categories-grid">
        <a class="design-category" aria-label="view more themed backdrop designs" href="{% url 'moredesign' %}?category=themed_backdrop">
          <div class="category-image">
            <img src="{% static 'images/upgraded balloon set-up/R1A.jpg' %}" alt="Themed Backdrop">
          </div>
          <div class="category-content">
            <h4>Themed Backdrop</h4>
            <p>Custom themed backdrops that bring your event vision to life</p>
          </div>
        </a>
        
        <a class="design-category" aria-label="view more minimalist setup" href="{% url 'moredesign' %}?category=minimalist_setup">
          <div class="category-image">
            <img src="{% static 'images/minimalist set-up/R1A.jpg' %}" alt="Minimalist Setup">
          </div>
          <div class="category-content">
            <h4>Minimalist Setup</h4>
            <p>Clean, elegant designs that focus on simplicity and sophistication</p>
          </div>
        </a>
        
        <a class="design-category" aria-label="view more signature setup" href="{% url 'moredesign' %}?category=signature_setup">
          <div class="category-image">
            <img src="{% static 'images/signature set-up/R1A.jpg' %}" alt="Signature Setup">
          </div>
          <div class="category-content">
            <h4>Signature Setup</h4>
            <p>Unique, personalized designs that reflect your special style</p>
          </div>
        </a>
      </div>
    </div>
  </section>


  <!-- REVIEWS -->
  <section id="reviews">
    <div class="reviews-content">
      <!-- LEFT SIDE -->
      <div class="reviews-left">
        <h2 class="ritalic">Hear from our</h2>
        <h2 class="rbold">clients</h2>
        <p>Real stories from satisfied clients who trusted us to make their events unforgettable.</p>

        {% if top_reviews %}
        <div class="reviews-nav">
          <button class="rprev">❮</button>
          <div class="rdots">
            {% for review in top_reviews %}
              <span class="rdot {% if forloop.first %}active{% endif %}"></span>
            {% endfor %}
          </div>
          <button class="rnext">❯</button>
        </div>
        {% else %}
        <div class="no-reviews-message">
          <p class="text-muted">No featured reviews yet. Check back soon!</p>
        </div>
        {% endif %}
      </div>

      <!-- RIGHT SIDE -->
      <div class="reviews-right">
        {% if top_reviews %}
        <div class="review-slider">
          <div class="review-track">
            {% for review in top_reviews %}
            <div class="review">
              <div class="review-header">
                <img src="{% static 'images/quotation.png' %}" alt="Quote Icon" class="quote-icon">
                <div class="star-rating" data-rating="{{ review.rating }}"></div>
              </div>
              <p class="review-text">
                {{ review.comment }}
              </p>
              <div class="review-user">
                <div class="review-details">
                  <h3>{{ review.user.first_name }} {{ review.user.last_name }}</h3>
                  <p>{{ review.created_at|date:"F j, Y" }}</p>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
        {% else %}
        <div class="no-reviews-placeholder">
          <div class="placeholder-content">
            <i class="fas fa-star" style="font-size: 3rem; color: #ddd; margin-bottom: 1rem;"></i>
            <h4>No Featured Reviews Yet</h4>
            <p class="text-muted">Featured reviews will appear here once our admin team bookmarks them.</p>
          </div>
        </div>
        {% endif %}
      </div>
    </div>
  </section>


  <!-- ABOUT US -->
  <section id="about-us">
    <div class="about-grid">
      <div class="about-photo">
        <img src="{% static 'images/minimalist set-up/R3A.jpg' %}" alt="Decor details">
      </div>
      <div class="about-card">
        <div class="about-card-inner">
          <img class="about-mark" src="{% static 'images/CLogo-text.jpg' %}" alt="Brand mark">
          <h3 class="about-heading">CELEBRATE WITH<br>NIKE'S CATERING SERVICES</h3>
          <p class="about-copy">

              Nike's Catering Services began in 2014 as a party needs supplier, and has since 
              expanded to provide
              all-inclusive packages for various occasions.
            </p>
            <p class="about-copy">
              As a commitment to bringing a tasteful yet affordable experience, Nike's Catering 
              Services has become one of
              the top choice for catering and event suppliers in Bulacan and nearby cities.
            </p>
        </div>
      </div>
      <div class="about-photo">
        <img src="{% static 'images/signature set-up/R4A.jpg' %}" alt="Reception setup">
      </div>
    </div>
  </section>

  <!-- FAQs -->
  <section id="faqs">
    <div class="faq-grid">
      <div class="faq-left">
        <h2 class="faq-hero-title">Any questions?<br>We got you.</h2>
        <p class="faq-hero-sub">Got questions about booking, packages, or payments? Here are quick answers to the most common ones.</p>
      </div>

      <div class="faq-right">
        <div class="faq-container">
          <div class="faq-item">
            <div class="faq-question">How do I book a package?</div>
            <div class="faq-answer">
              You can book through our website, message us on Facebook, or contact us directly using the numbers provided in the Contact Us section.
            </div>
          </div>

          <div class="faq-item">
            <div class="faq-question">Do you offer custom event packages?</div>
            <div class="faq-answer">
              Yes! We customize packages based on your preferences. Let us know your budget, theme, and number of guests, and we'll take care of the rest.
            </div>
          </div>

          <div class="faq-item">
            <div class="faq-question">What are your mode of payments?</div>
            <div class="faq-answer">
              We cater cash and GCash payments.
            </div>
          </div>

          <div class="faq-item">
            <div class="faq-question">Can I request a food tasting before booking?</div>
            <div class="faq-answer">
              Absolutely. We offer scheduled food tasting sessions on every weekend of the month. You can reach us by clicking our contact details in Contact Us section.
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>


 <!-- CONTACT US -->
<section id="contact-us">
  <div class="footer-container">
    <div class="footer-column company-info">
      <div class="footer-logo">
        <img src="https://res.cloudinary.com/dzjrdqkiw/image/upload/v1758442112/soireelogo-l_eazlvf.svg" alt="Company Logo">
        <div class="logo-text">
          <span class="company-name">Nike's Catering Services</span>
          <p class="company-subtext">Celebrate with Nike's!</p>
        </div>
      </div>

      
      <div class="footer-address">
        <p>Bulacan, Philippines</p>
        <p class="mobile"><a aria-label="mobile number 1" href="tel:+639662003092">+63 966 200 3092</a></p>
        <p class="mobile"><a aria-label="mobile number 2" href="tel:+639283452913">+63 928 345 2913</a></p>
      </div>

      <div class="footer-copyright">
        <p>© 2024 Nike's Catering Services. All rights reserved.</p>
      </div>
    </div>

    <div class="footer-column">
      <h3 class="footer-heading">ABOUT</h3>
      <ul class="footer-links">
        <li><a aria-label="about us" href="#about-us">Our Story</a></li>
        <li><a aria-label="services" href="#services">Services</a></li>
        <li><a aria-label="packages" href="#packages">Packages</a></li>
        <li><a aria-label="designs" href="#design">Designs</a></li>
      </ul>
    </div>

    <div class="footer-column">
      <h3 class="footer-heading">SERVICES</h3>
      <ul class="footer-links">
        <li><a aria-label="wedding services" href="#services">Wedding</a></li>
        <li><a aria-label="birthday services" href="#services">Birthday</a></li>
        <li><a aria-label="kiddie party services" href="#services">Kiddie Party</a></li>
        <li><a aria-label="christening services" href="#services">Christening</a></li>
        <li><a aria-label="custom events services" href="#services">Custom Events</a></li>
      </ul>
    </div>

    <div class="footer-column">
      <h3 class="footer-heading">CONTACT</h3>
      <ul class="footer-links">
        <li><a aria-label="company email address" href="mailto:nikescateringofficial@gmail.com">Email Us</a></li>
        <li><a aria-label="company facebook page" href="https://www.facebook.com/nikescateringservicesofficial">Facebook</a></li>
        <li><a aria-label="mobile number 1" href="tel:+639662003092">Call Us</a></li>
      </ul>
    </div>
  </div>
</section>


  <!-- FUNCTIONS -->

<script>
// Function to open kiddie dropdown when Explore Packages is clicked
function openKiddieDropdown() {
  // Close all dropdowns first
  document.querySelectorAll('.service-dropdown').forEach(d => d.style.display = 'none');
  
  // Open kiddie dropdown
  const kiddieDropdown = document.getElementById('dropdown-kiddie');
  if (kiddieDropdown) {
    kiddieDropdown.style.display = 'block';
  }
  
  // Update openDropdown variable
  window.openDropdown = kiddieDropdown;
}
</script>

<script>
// filepath: c:\Users\yasmi\Downloads\workspace\soireeweb\main\templates\main.html
document.addEventListener('DOMContentLoaded', function () {
  // Apply backgrounds for service cards (avoid inline style quoting issues)
  document.querySelectorAll('.service-card').forEach(card => {
    const bg = card.getAttribute('data-bg-url');
    if (bg) card.style.backgroundImage = `url('${bg}')`;
  });
  const serviceDropdownMap = {
    'Kiddie Party': 'dropdown-kiddie',
    'Birthday': 'dropdown-birthday',
    'Wedding': 'dropdown-wedding',
    'Christening': 'dropdown-christening',
    'Custom Event': 'dropdown-custom'
  };

  let openDropdown = null;

  document.querySelectorAll('.service-card').forEach(card => {
    card.addEventListener('click', function () {
      const event = card.getAttribute('data-event');
      const dropdownId = serviceDropdownMap[event];
      const dropdown = document.getElementById(dropdownId);

      // If clicking the same card, toggle its dropdown
      if (openDropdown === dropdown) {
        dropdown.style.display = (dropdown.style.display === 'none' || dropdown.style.display === '') ? 'block' : 'none';
        openDropdown = dropdown.style.display === 'block' ? dropdown : null;
      } else {
        // Hide all dropdowns
        document.querySelectorAll('.service-dropdown').forEach(d => d.style.display = 'none');
        // Show the clicked one
        dropdown.style.display = 'block';
        openDropdown = dropdown;
      }
    });
  });

  // Slider logic for each dropdown
  const packageImages = [
    [
      "{% static 'images/packages/kiddie party/50pax.jpg' %}",
      "{% static 'images/packages/kiddie party/70pax.jpg' %}",
      "{% static 'images/packages/kiddie party/80pax.jpg' %}",
      "{% static 'images/packages/kiddie party/100pax.jpg' %}",
      "{% static 'images/packages/kiddie party/120pax.jpg' %}",
      "{% static 'images/packages/kiddie party/130pax.jpg' %}",
      "{% static 'images/packages/kiddie party/150pax.jpg' %}",
      "{% static 'images/packages/kiddie party/160pax.jpg' %}",
      "{% static 'images/packages/kiddie party/170pax.jpg' %}",
      "{% static 'images/packages/kiddie party/180pax.jpg' %}",
      "{% static 'images/packages/kiddie party/200pax.jpg' %}",
    ],
    [
      "{% static 'images/packages/birthday/50pax.jpg' %}",
      "{% static 'images/packages/birthday/70pax.jpg' %}",
      "{% static 'images/packages/birthday/80pax.jpg' %}",
      "{% static 'images/packages/birthday/100pax.jpg' %}",
      "{% static 'images/packages/birthday/120pax.jpg' %}",
      "{% static 'images/packages/birthday/130pax.jpg' %}",
      "{% static 'images/packages/birthday/150pax.jpg' %}",
      "{% static 'images/packages/birthday/160pax.jpg' %}",
      "{% static 'images/packages/birthday/170pax.jpg' %}",
      "{% static 'images/packages/birthday/180pax.jpg' %}",
      "{% static 'images/packages/birthday/200pax.jpg' %}",
    ],
    [
      "{% static 'images/packages/wedding/50pax.jpg' %}",
      "{% static 'images/packages/wedding/60pax.jpg' %}",
      "{% static 'images/packages/wedding/70pax.jpg' %}",
      "{% static 'images/packages/wedding/80pax.jpg' %}",
      "{% static 'images/packages/wedding/100pax.jpg' %}",
      "{% static 'images/packages/wedding/120pax.jpg' %}",
      "{% static 'images/packages/wedding/130pax.jpg' %}",
      "{% static 'images/packages/wedding/150pax.jpg' %}",
      "{% static 'images/packages/wedding/160pax.jpg' %}",
      "{% static 'images/packages/wedding/170pax.jpg' %}",
      "{% static 'images/packages/wedding/180pax.jpg' %}",
      "{% static 'images/packages/wedding/200pax.jpg' %}",
      "{% static 'images/packages/wedding/250pax.jpg' %}",
    ],
    [
      "{% static 'images/packages/christening/50pax.jpg' %}",
      "{% static 'images/packages/christening/70pax.jpg' %}",
      "{% static 'images/packages/christening/80pax.jpg' %}",
      "{% static 'images/packages/christening/100pax.jpg' %}",
      "{% static 'images/packages/christening/120pax.jpg' %}",
      "{% static 'images/packages/christening/150pax.jpg' %}",
      "{% static 'images/packages/christening/200pax.jpg' %}",
    ],
    [
      "{% static 'images/packages/others/below100.jpg' %}",
      "{% static 'images/packages/others/above100.jpg' %}",
    ]
  ];

  document.querySelectorAll('.service-dropdown').forEach(function (dropdown, idx) {
    const slider = dropdown.querySelector('.package-slider');
    const img = dropdown.querySelector('.pkg-image');
    const prev = dropdown.querySelector('.pkg-prev');
    const next = dropdown.querySelector('.pkg-next');
    let imgIdx = 0;

    if (slider && img && prev && next) {
      function updateImg() {
        img.src = packageImages[idx][imgIdx];
      }
      prev.addEventListener('click', function (e) {
        e.stopPropagation();
        imgIdx = (imgIdx - 1 + packageImages[idx].length) % packageImages[idx].length;
        updateImg();
      });
      next.addEventListener('click', function (e) {
        e.stopPropagation();
        imgIdx = (imgIdx + 1) % packageImages[idx].length;
        updateImg();
      });
      updateImg();
    }
  });

  // Populate side images based on selected service
  const sideImagesMap = {};

  function setSideImages(dropdownId) {
    const dropdown = document.getElementById(dropdownId);
    if (!dropdown) return;
    const imgs = dropdown.querySelectorAll('.side-img');
    const sources = sideImagesMap[dropdownId] || [];
    imgs.forEach((img, i) => {
      // Do not override if the image already has a src defined in HTML
      if (!img.getAttribute('src')) {
        if (sources[i]) img.src = sources[i];
      }
    });
  }

  // Hook into service card clicks to set side images
  document.querySelectorAll('.service-card').forEach(card => {
    card.addEventListener('click', function () {
      const event = card.getAttribute('data-event');
      const dropdownId = serviceDropdownMap[event];
      setSideImages(dropdownId);
    });
  });
});
</script>

  <!-- AI CHATBOT PRESENCE -->
  <script>
    const chatBtn = document.getElementById('chat-ai-btn');
    if (window.location.pathname.includes('login') || window.location.pathname.includes('register')) {
      if (chatBtn) chatBtn.style.display = 'none';
    }
  </script>


 <!-- FOR PACKAGES -->
<script>
  document.addEventListener('DOMContentLoaded', function () {
    const packageImages = [
      [
        "{% static 'images/packages/kiddie party/50pax.jpg' %}",
        "{% static 'images/packages/kiddie party/70pax.jpg' %}",
        "{% static 'images/packages/kiddie party/80pax.jpg' %}",
        "{% static 'images/packages/kiddie party/100pax.jpg' %}",
        "{% static 'images/packages/kiddie party/120pax.jpg' %}",
        "{% static 'images/packages/kiddie party/130pax.jpg' %}",
        "{% static 'images/packages/kiddie party/150pax.jpg' %}",
        "{% static 'images/packages/kiddie party/160pax.jpg' %}",
        "{% static 'images/packages/kiddie party/170pax.jpg' %}",
        "{% static 'images/packages/kiddie party/180pax.jpg' %}",
        "{% static 'images/packages/kiddie party/200pax.jpg' %}",
      ],
      [
        "{% static 'images/packages/birthday/50pax.jpg' %}",
        "{% static 'images/packages/birthday/70pax.jpg' %}",
        "{% static 'images/packages/birthday/80pax.jpg' %}",
        "{% static 'images/packages/birthday/100pax.jpg' %}",
        "{% static 'images/packages/birthday/120pax.jpg' %}",
        "{% static 'images/packages/birthday/130pax.jpg' %}",
        "{% static 'images/packages/birthday/150pax.jpg' %}",
        "{% static 'images/packages/birthday/160pax.jpg' %}",
        "{% static 'images/packages/birthday/170pax.jpg' %}",
        "{% static 'images/packages/birthday/180pax.jpg' %}",
        "{% static 'images/packages/birthday/200pax.jpg' %}",
      ],
      [
        "{% static 'images/packages/wedding/50pax.jpg' %}",
        "{% static 'images/packages/wedding/60pax.jpg' %}",
        "{% static 'images/packages/wedding/70pax.jpg' %}",
        "{% static 'images/packages/wedding/80pax.jpg' %}",
        "{% static 'images/packages/wedding/100pax.jpg' %}",
        "{% static 'images/packages/wedding/120pax.jpg' %}",
        "{% static 'images/packages/wedding/130pax.jpg' %}",
        "{% static 'images/packages/wedding/150pax.jpg' %}",
        "{% static 'images/packages/wedding/160pax.jpg' %}",
        "{% static 'images/packages/wedding/170pax.jpg' %}",
        "{% static 'images/packages/wedding/180pax.jpg' %}",
        "{% static 'images/packages/wedding/200pax.jpg' %}",
        "{% static 'images/packages/wedding/250pax.jpg' %}",
      ],
      [
        "{% static 'images/packages/christening/50pax.jpg' %}",
        "{% static 'images/packages/christening/70pax.jpg' %}",
        "{% static 'images/packages/christening/80pax.jpg' %}",
        "{% static 'images/packages/christening/100pax.jpg' %}",
        "{% static 'images/packages/christening/120pax.jpg' %}",
        "{% static 'images/packages/christening/150pax.jpg' %}",
        "{% static 'images/packages/christening/200pax.jpg' %}",
      ],
      [
        "{% static 'images/packages/others/below100.jpg' %}",
        "{% static 'images/packages/others/above100.jpg' %}",
      ]
    ];

    document.querySelectorAll('.package').forEach(function (pkg, pkgIdx) {
      const title = pkg.querySelector('.package-title');
      const body = pkg.querySelector('.package-body');
      const slider = pkg.querySelector('.package-slider');
      const img = pkg.querySelector('.pkg-image');
      const prev = pkg.querySelector('.pkg-prev');
      const next = pkg.querySelector('.pkg-next');
      let imgIdx = 0;

      // Accordion toggle
      title.addEventListener('click', function () {
        document.querySelectorAll('.package-body').forEach(b => {
          if (b !== body) b.classList.remove('open');
        });
        body.classList.toggle('open');
      });

      // Only run slider logic if slider exists
      if (slider && img && prev && next) {
        function updateImg() {
          img.src = packageImages[pkgIdx][imgIdx];
        }
        prev.addEventListener('click', function (e) {
          e.stopPropagation();
          imgIdx = (imgIdx - 1 + packageImages[pkgIdx].length) % packageImages[pkgIdx].length;
          updateImg();
        });
        next.addEventListener('click', function (e) {
          e.stopPropagation();
          imgIdx = (imgIdx + 1) % packageImages[pkgIdx].length;
          updateImg();
        });
        updateImg();
      }
    });
  });
</script>

<!-- For images in packages -->
<div id="image-modal" class="image-modal">
  <button class="modal-prev">❮</button>
  <img class="modal-content" id="modal-img" src="" alt="Full Size">
  <button class="modal-next">❯</button>
  <span class="close-modal">&times;</span>
</div>
<script>
  // filepath: main/templates/main.html
  document.addEventListener('DOMContentLoaded', function () {
    // Use the same packageImages array as your slider (PACKAGES section)
    const packageImages = [
      [
        "{% static 'images/packages/kiddie party/50pax.jpg' %}",
        "{% static 'images/packages/kiddie party/70pax.jpg' %}",
        "{% static 'images/packages/kiddie party/80pax.jpg' %}",
        "{% static 'images/packages/kiddie party/100pax.jpg' %}",
        "{% static 'images/packages/kiddie party/120pax.jpg' %}",
        "{% static 'images/packages/kiddie party/130pax.jpg' %}",
        "{% static 'images/packages/kiddie party/150pax.jpg' %}",
        "{% static 'images/packages/kiddie party/160pax.jpg' %}",
        "{% static 'images/packages/kiddie party/170pax.jpg' %}",
        "{% static 'images/packages/kiddie party/180pax.jpg' %}",
        "{% static 'images/packages/kiddie party/200pax.jpg' %}",
      ],
      [
        "{% static 'images/packages/birthday/50pax.jpg' %}",
        "{% static 'images/packages/birthday/70pax.jpg' %}",
        "{% static 'images/packages/birthday/80pax.jpg' %}",
        "{% static 'images/packages/birthday/100pax.jpg' %}",
        "{% static 'images/packages/birthday/120pax.jpg' %}",
        "{% static 'images/packages/birthday/130pax.jpg' %}",
        "{% static 'images/packages/birthday/150pax.jpg' %}",
        "{% static 'images/packages/birthday/160pax.jpg' %}",
        "{% static 'images/packages/birthday/170pax.jpg' %}",
        "{% static 'images/packages/birthday/180pax.jpg' %}",
        "{% static 'images/packages/birthday/200pax.jpg' %}",
      ],
      [
        "{% static 'images/packages/wedding/50pax.jpg' %}",
        "{% static 'images/packages/wedding/60pax.jpg' %}",
        "{% static 'images/packages/wedding/70pax.jpg' %}",
        "{% static 'images/packages/wedding/80pax.jpg' %}",
        "{% static 'images/packages/wedding/100pax.jpg' %}",
        "{% static 'images/packages/wedding/120pax.jpg' %}",
        "{% static 'images/packages/wedding/130pax.jpg' %}",
        "{% static 'images/packages/wedding/150pax.jpg' %}",
        "{% static 'images/packages/wedding/160pax.jpg' %}",
        "{% static 'images/packages/wedding/170pax.jpg' %}",
        "{% static 'images/packages/wedding/180pax.jpg' %}",
        "{% static 'images/packages/wedding/200pax.jpg' %}",
        "{% static 'images/packages/wedding/250pax.jpg' %}",
      ],
      [
        "{% static 'images/packages/christening/50pax.jpg' %}",
        "{% static 'images/packages/christening/70pax.jpg' %}",
        "{% static 'images/packages/christening/80pax.jpg' %}",
        "{% static 'images/packages/christening/100pax.jpg' %}",
        "{% static 'images/packages/christening/120pax.jpg' %}",
        "{% static 'images/packages/christening/150pax.jpg' %}",
        "{% static 'images/packages/christening/200pax.jpg' %}",
      ],
      [
        "{% static 'images/packages/others/below100.jpg' %}",
        "{% static 'images/packages/others/above100.jpg' %}",
      ]
    ];

    // Images for SERVICES dropdown slider (same order as #service-dropdowns)
    const serviceImages = [
      [
        "{% static 'images/packages/kiddie party/50pax.jpg' %}",
        "{% static 'images/packages/kiddie party/70pax.jpg' %}",
        "{% static 'images/packages/kiddie party/80pax.jpg' %}",
        "{% static 'images/packages/kiddie party/100pax.jpg' %}",
        "{% static 'images/packages/kiddie party/120pax.jpg' %}",
        "{% static 'images/packages/kiddie party/130pax.jpg' %}",
        "{% static 'images/packages/kiddie party/150pax.jpg' %}",
        "{% static 'images/packages/kiddie party/160pax.jpg' %}",
        "{% static 'images/packages/kiddie party/170pax.jpg' %}",
        "{% static 'images/packages/kiddie party/180pax.jpg' %}",
        "{% static 'images/packages/kiddie party/200pax.jpg' %}",
      ],
      [
        "{% static 'images/packages/birthday/50pax.jpg' %}",
        "{% static 'images/packages/birthday/70pax.jpg' %}",
        "{% static 'images/packages/birthday/80pax.jpg' %}",
        "{% static 'images/packages/birthday/100pax.jpg' %}",
        "{% static 'images/packages/birthday/120pax.jpg' %}",
        "{% static 'images/packages/birthday/130pax.jpg' %}",
        "{% static 'images/packages/birthday/150pax.jpg' %}",
        "{% static 'images/packages/birthday/160pax.jpg' %}",
        "{% static 'images/packages/birthday/170pax.jpg' %}",
        "{% static 'images/packages/birthday/180pax.jpg' %}",
        "{% static 'images/packages/birthday/200pax.jpg' %}",
      ],
      [
        "{% static 'images/packages/wedding/50pax.jpg' %}",
        "{% static 'images/packages/wedding/60pax.jpg' %}",
        "{% static 'images/packages/wedding/70pax.jpg' %}",
        "{% static 'images/packages/wedding/80pax.jpg' %}",
        "{% static 'images/packages/wedding/100pax.jpg' %}",
        "{% static 'images/packages/wedding/120pax.jpg' %}",
        "{% static 'images/packages/wedding/130pax.jpg' %}",
        "{% static 'images/packages/wedding/150pax.jpg' %}",
        "{% static 'images/packages/wedding/160pax.jpg' %}",
        "{% static 'images/packages/wedding/170pax.jpg' %}",
        "{% static 'images/packages/wedding/180pax.jpg' %}",
        "{% static 'images/packages/wedding/200pax.jpg' %}",
        "{% static 'images/packages/wedding/250pax.jpg' %}",
      ],
      [
        "{% static 'images/packages/christening/50pax.jpg' %}",
        "{% static 'images/packages/christening/70pax.jpg' %}",
        "{% static 'images/packages/christening/80pax.jpg' %}",
        "{% static 'images/packages/christening/100pax.jpg' %}",
        "{% static 'images/packages/christening/120pax.jpg' %}",
        "{% static 'images/packages/christening/150pax.jpg' %}",
        "{% static 'images/packages/christening/200pax.jpg' %}",
      ],
      [
        "{% static 'images/packages/others/below100.jpg' %}",
        "{% static 'images/packages/others/above100.jpg' %}",
      ]
    ];
    const modal = document.getElementById('image-modal');
    const modalImg = document.getElementById('modal-img');
    const closeBtn = document.querySelector('.close-modal');
    const prevBtn = document.querySelector('.modal-prev');
    const nextBtn = document.querySelector('.modal-next');

    // Track which gallery is open
    let currentContext = 'packages'; // 'packages' | 'services'
    let currentPackage = 0; // for packages
    let currentService = 0; // for services
    let currentImgIdx = 0;

    // Find all .pkg-image and set up click
    document.querySelectorAll('.package').forEach(function (pkg, pkgIdx) {
      const imgs = pkg.querySelectorAll('.pkg-image');
      imgs.forEach(function (img) {
        img.addEventListener('click', function (e) {
          // Find the current image index in the packageImages array
          currentContext = 'packages';
          currentPackage = pkgIdx;
          // Find the current image index by matching src
          currentImgIdx = 0;
          const src = img.src;
          packageImages[pkgIdx].forEach((url, idx) => {
            // Django static URLs may be absolute or relative, so use includes
            if (src.includes(url.replace("{% static '", "").replace("' %}", ""))) {
              currentImgIdx = idx;
            }
          });
          showModalImage();
          modal.classList.add('open');
        });
      });
    });

    // Make SERVICES dropdown images viewable
    const serviceDropdowns = document.querySelectorAll('#service-dropdowns .service-dropdown');
    serviceDropdowns.forEach(function (dd, ddIdx) {
      const img = dd.querySelector('.pkg-image');
      if (!img) return;
      img.addEventListener('click', function () {
        currentContext = 'services';
        currentService = ddIdx;
        currentImgIdx = 0;
        showModalImage();
        modal.classList.add('open');
      });
    });

    function showModalImage() {
      if (currentContext === 'services') {
        modalImg.src = serviceImages[currentService][currentImgIdx];
      } else {
        modalImg.src = packageImages[currentPackage][currentImgIdx];
      }
    }

    prevBtn.addEventListener('click', function (e) {
      e.stopPropagation();
      const arr = currentContext === 'services' ? serviceImages[currentService] : packageImages[currentPackage];
      currentImgIdx = (currentImgIdx - 1 + arr.length) % arr.length;
      showModalImage();
    });

    nextBtn.addEventListener('click', function (e) {
      e.stopPropagation();
      const arr = currentContext === 'services' ? serviceImages[currentService] : packageImages[currentPackage];
      currentImgIdx = (currentImgIdx + 1) % arr.length;
      showModalImage();
    });

    closeBtn.addEventListener('click', function () {
      modal.classList.remove('open');
      modalImg.src = '';
    });

    // Close modal on background click
    modal.addEventListener('click', function (e) {
      if (e.target === modal) {
        modal.classList.remove('open');
        modalImg.src = '';
      }
    });

    // Optional: Close modal on ESC key
    document.addEventListener('keydown', function (e) {
      if (e.key === "Escape") {
        modal.classList.remove('open');
        modalImg.src = '';
      }
    });
  });
</script>


  <!-- STARS ON REVIEWS -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      document.querySelectorAll('.star-rating').forEach(container => {
        const rating = parseInt(container.getAttribute('data-rating'));
        container.innerHTML = '';
        for (let i = 1; i <= 5; i++) {
          const star = document.createElement('span');
          star.textContent = i <= rating ? '★' : '☆';
          container.appendChild(star);
        }
      });
    });
  </script>


  <!-- SLIDER FOR REVIEWS -->
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const track = document.querySelector('.review-track');
      const reviews = document.querySelectorAll('.review');
      const dots = document.querySelectorAll('.rdot');
      const prev = document.querySelector('.rprev');
      const next = document.querySelector('.rnext');
      
      // Only initialize slider if there are reviews
      if (track && reviews.length > 0 && dots.length > 0 && prev && next) {
        let index = 0;

        function updateSlider() {
          const reviewWidth = reviews[0].offsetWidth;
          track.style.transform = `translateX(-${index * reviewWidth}px)`;

          // Update active dot
          dots.forEach((dot, i) => dot.classList.toggle('active', i === index));
        }

        next.addEventListener('click', () => {
          index = (index + 1) % reviews.length;
          updateSlider();
        });

        prev.addEventListener('click', () => {
          index = (index - 1 + reviews.length) % reviews.length;
          updateSlider();
        });

        dots.forEach((dot, i) => {
          dot.addEventListener('click', () => {
            index = i;
            updateSlider();
          });
        });

        // Initialize stars
        document.querySelectorAll('.star-rating').forEach(container => {
          const rating = parseInt(container.getAttribute('data-rating'));
          container.innerHTML = '';
          for (let i = 1; i <= 5; i++) {
            const star = document.createElement('span');
            star.textContent = i <= rating ? '★' : '☆';
            container.appendChild(star);
          }
        });

        // Recalculate on window resize
        window.addEventListener('resize', updateSlider);

        updateSlider();
      }
    });
  </script>

  <!-- FOR DROPDOWN FAQS -->
   <script>
  document.addEventListener('DOMContentLoaded', function () {
    const faqItems = document.querySelectorAll('.faq-item');

    faqItems.forEach(item => {
      const question = item.querySelector('.faq-question');
      question.addEventListener('click', () => {
        item.classList.toggle('open');
      });
    });
  });
</script>

<!-- User Notification Modal -->
{% if user.is_authenticated %}
<div class="modal fade user-notification-modal" id="userNotificationModal" tabindex="-1" aria-labelledby="userNotificationModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg" style="max-width: 800px;">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="userNotificationModalLabel">
          <i class="fas fa-bell"></i> Notifications
        </h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body p-0">
        <div id="userNotificationList" style="max-height: 400px; overflow-y: auto; overflow-x: hidden;">
          <div class="text-center p-4 text-muted">
            <i class="fas fa-bell-slash mb-2" style="font-size: 2rem;"></i>
            <p>No new notifications</p>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        <button type="button" class="btn" style="background: #568756; color: white;" onclick="markAllUserNotificationsAsRead()">
          Mark All as Read
        </button>
      </div>
    </div>
  </div>
</div>

<!-- User Notification Styles -->
<style>
.notification-btn {
  position: relative;
  display: inline-flex;
  align-items: center;
  gap: 5px;
  text-decoration: none;
  color: inherit;
}

.notification-badge {
  position: absolute;
  top: -8px;
  right: -8px;
  background: #568756;
  color: #fff;
  border-radius: 50%;
  padding: 2px 6px;
  font-size: 10px;
  min-width: 18px;
  height: 18px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
}

.user-notification-modal .modal-content {
  background: #fff;
  border-radius: 10px;
  border: none;
}

.user-notification-modal .modal-header {
  background: #568756;
  color: #fff;
  border-radius: 10px 10px 0 0;
}

.user-notification-item {
  padding: 15px;
  border-bottom: 1px solid #eee;
  transition: background 0.2s;
  word-wrap: break-word;
  overflow-wrap: break-word;
}

.user-notification-item:hover {
  background: #f8f9fa;
}

.user-notification-item:last-child {
  border-bottom: none;
}

.user-notification-icon {
  width: 40px;
  height: 40px;
  background: #568756;
  color: #fff;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  margin-right: 15px;
  flex-shrink: 0;
}

.user-notification-content {
  flex-grow: 1;
  min-width: 0;
  overflow: hidden;
}

.user-notification-title {
  font-weight: 600;
  color: #222;
  margin-bottom: 5px;
  word-wrap: break-word;
  overflow-wrap: break-word;
}

.user-notification-text {
  color: #666;
  font-size: 14px;
  margin-bottom: 5px;
  word-wrap: break-word;
  overflow-wrap: break-word;
  line-height: 1.4;
}

.user-notification-time {
  color: #999;
  font-size: 12px;
}

.user-notification-sender {
  color: #222;
  font-size: 12px;
  font-weight: 500;
}

@keyframes slideIn {
  from { transform: translateX(100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
}

@keyframes slideOut {
  from { transform: translateX(0); opacity: 1; }
  to { transform: translateX(100%); opacity: 0; }
}

.user-notification-item:hover {
  background-color: #f8f9fa !important;
  transform: translateX(2px);
}

.toast-notification {
  position: fixed;
  top: 80px;
  right: 20px;
  background: #568756;
  color: white;
  padding: 15px 20px;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  z-index: 9999;
  max-width: 350px;
  animation: slideIn 0.3s ease-out;
}

.no-reviews-placeholder {
  display: flex;
  align-items: center;
  justify-content: center;
  height: 300px;
  text-align: center;
}

.placeholder-content {
  max-width: 300px;
}

.no-reviews-message {
  margin-top: 20px;
}
</style>

<!-- User Notification JavaScript -->
<script>
let userNotificationCount = 0;
let userNotifications = [];

// Initialize user notification system
document.addEventListener('DOMContentLoaded', function() {
  loadUserNotifications();
  setupRealtimeUserNotifications();
});

function loadUserNotifications() {
  fetch('/notifications/')
    .then(response => response.json())
    .then(data => {
      userNotifications = data.notifications;
      updateUserNotificationUI();
    })
    .catch(err => console.error('Error loading user notifications:', err));
}

function updateUserNotificationUI() {
  const badge = document.getElementById('userNotificationBadge');
  const list = document.getElementById('userNotificationList');
  
  const unreadCount = userNotifications.filter(n => !n.is_read).length;
  
  if (unreadCount > 0) {
    badge.textContent = unreadCount;
    badge.style.display = 'flex';
  } else {
    badge.style.display = 'none';
  }
  
  if (userNotifications.length === 0) {
    list.innerHTML = `
      <div class="text-center p-4 text-muted">
        <i class="fas fa-bell-slash mb-2" style="font-size: 2rem;"></i>
        <p>No new notifications</p>
      </div>
    `;
  } else {
    list.innerHTML = userNotifications.map(notification => {
      // Determine icon based on notification type
      let icon = 'fas fa-envelope'; // default for admin message
      if (notification.notification_type === 'booking_update') {
        icon = 'fas fa-calendar-check';
      } else if (notification.notification_type === 'event_reminder') {
        icon = 'fas fa-clock';
      } else if (notification.notification_type === 'payment_update') {
        icon = 'fas fa-credit-card';
      }
      
      return `
        <div class="user-notification-item d-flex ${notification.is_read ? '' : 'bg-light'}" 
             data-id="${notification.id}" 
             data-booking-id="${notification.booking_id || ''}"
             data-notification-type="${notification.notification_type || 'admin_message'}"
             onclick="handleUserNotificationClick(this)"
             style="cursor: pointer; transition: all 0.2s ease;">
          <div class="user-notification-icon">
            <i class="${icon}"></i>
          </div>
          <div class="user-notification-content">
            <div class="user-notification-title">${notification.title}</div>
            <div class="user-notification-text">${notification.message}</div>
            <div class="user-notification-sender">From: ${notification.sender_name}</div>
            <div class="user-notification-time">${notification.created_at}</div>
          </div>
          ${!notification.is_read ? '<div class="text-primary"><i class="fas fa-circle" style="font-size: 8px;"></i></div>' : ''}
        </div>
      `;
    }).join('');
  }
}

function addUserNotification(data) {
  userNotifications.unshift({
    id: data.id,
    title: data.title,
    message: data.message,
    created_at: data.created_at,
    booking_id: data.booking_id,
    sender_name: data.sender_name,
    notification_type: data.type === 'booking_update' ? 'booking_update' : (data.type === 'event_reminder' ? 'event_reminder' : (data.type === 'payment_update' ? 'payment_update' : 'admin_message')),
    is_read: false
  });
  updateUserNotificationUI();
  
  // Show toast notification
  showUserToast(data.title, data.message);
}

function showUserToast(title, message) {
  // Create toast element
  const toast = document.createElement('div');
  toast.className = 'toast-notification';
  toast.innerHTML = `
    <div style="font-weight: 600; margin-bottom: 5px;">${title}</div>
    <div style="font-size: 14px; opacity: 0.9;">${message}</div>
  `;
  
  document.body.appendChild(toast);
  
  // Remove after 5 seconds
  setTimeout(() => {
    toast.style.animation = 'slideOut 0.3s ease-in';
    setTimeout(() => document.body.removeChild(toast), 300);
  }, 5000);
}

function markAllUserNotificationsAsRead() {
  fetch('/notifications/mark-all-read/', {
    method: 'POST',
    headers: {
      'X-CSRFToken': getCsrfToken(),
      'Content-Type': 'application/json',
    }
  })
  .then(response => response.json())
  .then(data => {
    if (data.success) {
      userNotifications.forEach(n => n.is_read = true);
      updateUserNotificationUI();
    }
  })
  .catch(err => console.error('Error marking user notifications as read:', err));
}

function setupRealtimeUserNotifications() {
  // Use Server-Sent Events for real-time notifications
  const eventSource = new EventSource('/notifications/stream/');
  
  eventSource.onmessage = function(event) {
    try {
      const data = JSON.parse(event.data);
      if (data.type === 'admin_message' || data.type === 'booking_update' || data.type === 'event_reminder' || data.type === 'payment_update') {
        addUserNotification(data);
      }
    } catch (err) {
      console.error('Error parsing user notification data:', err);
    }
  };
  
  eventSource.onerror = function(event) {
    console.warn('User notification stream error:', event);
  };
}

// Handle notification click to navigate to booking or relevant page
function handleUserNotificationClick(element) {
  const bookingId = element.getAttribute('data-booking-id');
  const notificationId = element.getAttribute('data-id');
  const notificationType = element.getAttribute('data-notification-type');
  
  // Mark notification as read immediately
  markUserNotificationAsReadOnServer(notificationId);
  markUserNotificationAsRead(notificationId);
  
  // Close the modal first
  const modal = bootstrap.Modal.getInstance(document.getElementById('userNotificationModal'));
  if (modal) {
    modal.hide();
  }
  
  // Handle different notification types
  if (bookingId && bookingId !== 'null' && bookingId !== '') {
    if (notificationType === 'admin_message') {
      // Navigate to my bookings page for messages
      window.location.href = '/my_bookings';
    } else {
      // Navigate to event status page for booking updates and payment updates
      window.location.href = `/event-status/${bookingId}/`;
    }
  } else {
    // For general notifications, just close the modal
    console.log('General notification clicked');
  }
}

function markUserNotificationAsRead(notificationId) {
  // Update the notification visually
  const notificationElement = document.querySelector(`[data-id="${notificationId}"]`);
  if (notificationElement) {
    notificationElement.classList.remove('bg-light');
    const unreadIndicator = notificationElement.querySelector('.text-primary');
    if (unreadIndicator) {
      unreadIndicator.remove();
    }
  }
  
  // Update the notifications array
  const notification = userNotifications.find(n => n.id == notificationId);
  if (notification) {
    notification.is_read = true;
  }
  
  // Update badge count
  updateUserNotificationUI();
}

function markUserNotificationAsReadOnServer(notificationId) {
  fetch(`/notifications/${notificationId}/mark-read/`, {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json',
      'X-CSRFToken': getCsrfToken()
    }
  })
  .then(response => response.json())
  .then(data => {
    if (data.success) {
      console.log('User notification marked as read on server');
    }
  })
  .catch(err => console.error('Error marking user notification as read:', err));
}

function getCsrfToken() {
  return document.querySelector('[name=csrfmiddlewaretoken]')?.value || '';
}
</script>
{% endif %}

<!-- Bootstrap JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<!-- Floating Banner JavaScript -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    const banner = document.getElementById('floating-banner');
    let isDragging = false;
    let startX, startY, initialX, initialY;
    let autoMinimizeTimer;
    let isMinimized = false;

    // Auto-minimize timer (5 seconds)
    const AUTO_MINIMIZE_DELAY = 5000;

    // Start auto-minimize timer
    function startAutoMinimizeTimer() {
        clearTimeout(autoMinimizeTimer);
        autoMinimizeTimer = setTimeout(() => {
            if (!isMinimized) {
                minimizeBanner();
            }
        }, AUTO_MINIMIZE_DELAY);
    }

    // Minimize banner
    function minimizeBanner() {
        banner.classList.add('minimized');
        isMinimized = true;
        clearTimeout(autoMinimizeTimer);
    }

    // Expand banner
    function expandBanner() {
        banner.classList.remove('minimized');
        isMinimized = false;
        startAutoMinimizeTimer();
    }

    // Toggle banner state
    function toggleBanner() {
        if (isMinimized) {
            expandBanner();
        } else {
            minimizeBanner();
        }
    }

    // Drag functionality
    banner.addEventListener('mousedown', function(e) {
        // Don't drag if clicking on download link
        if (e.target.closest('a')) {
            return;
        }
        
        isDragging = true;
        startX = e.clientX;
        startY = e.clientY;
        
        const rect = banner.getBoundingClientRect();
        initialX = rect.left;
        initialY = rect.top;
        
        banner.style.transition = 'none';
        document.addEventListener('mousemove', handleDrag);
        document.addEventListener('mouseup', handleDragEnd);
        
        e.preventDefault();
    });

    function handleDrag(e) {
        if (!isDragging) return;
        
        const deltaX = e.clientX - startX;
        const deltaY = e.clientY - startY;
        
        let newX = initialX + deltaX;
        let newY = initialY + deltaY;
        
        // Constrain to viewport
        const bannerRect = banner.getBoundingClientRect();
        const viewportWidth = window.innerWidth;
        const viewportHeight = window.innerHeight;
        
        // Keep banner within viewport bounds
        newX = Math.max(0, Math.min(newX, viewportWidth - bannerRect.width));
        newY = Math.max(0, Math.min(newY, viewportHeight - bannerRect.height));
        
        banner.style.left = newX + 'px';
        banner.style.top = newY + 'px';
        banner.style.right = 'auto';
        banner.style.transform = 'none';
    }

    function handleDragEnd() {
        if (!isDragging) return;
        
        isDragging = false;
        banner.style.transition = 'all 0.3s ease';
        
        // Snap to edges
        const rect = banner.getBoundingClientRect();
        const viewportWidth = window.innerWidth;
        const viewportHeight = window.innerHeight;
        
        // Snap to right edge if close enough
        if (rect.right > viewportWidth - 50) {
            banner.style.left = 'auto';
            banner.style.right = '20px';
            banner.style.top = '50%';
            banner.style.transform = 'translateY(-50%)';
        }
        // Snap to left edge if close enough
        else if (rect.left < 50) {
            banner.style.left = '20px';
            banner.style.right = 'auto';
            banner.style.top = '50%';
            banner.style.transform = 'translateY(-50%)';
        }
        
        document.removeEventListener('mousemove', handleDrag);
        document.removeEventListener('mouseup', handleDragEnd);
        
        // Restart auto-minimize timer after dragging
        if (!isMinimized) {
            startAutoMinimizeTimer();
        }
    }

    // Click to toggle (only when not dragging)
    banner.addEventListener('click', function(e) {
        // Don't toggle if clicking on download link
        if (e.target.closest('a')) {
            return;
        }
        
        // Small delay to distinguish between click and drag
        setTimeout(() => {
            if (!isDragging) {
                toggleBanner();
            }
        }, 100);
    });

    // Touch support for mobile
    banner.addEventListener('touchstart', function(e) {
        if (e.target.closest('a')) {
            return;
        }
        
        isDragging = true;
        const touch = e.touches[0];
        startX = touch.clientX;
        startY = touch.clientY;
        
        const rect = banner.getBoundingClientRect();
        initialX = rect.left;
        initialY = rect.top;
        
        banner.style.transition = 'none';
        e.preventDefault();
    });

    banner.addEventListener('touchmove', function(e) {
        if (!isDragging) return;
        
        const touch = e.touches[0];
        const deltaX = touch.clientX - startX;
        const deltaY = touch.clientY - startY;
        
        let newX = initialX + deltaX;
        let newY = initialY + deltaY;
        
        // Constrain to viewport
        const bannerRect = banner.getBoundingClientRect();
        const viewportWidth = window.innerWidth;
        const viewportHeight = window.innerHeight;
        
        newX = Math.max(0, Math.min(newX, viewportWidth - bannerRect.width));
        newY = Math.max(0, Math.min(newY, viewportHeight - bannerRect.height));
        
        banner.style.left = newX + 'px';
        banner.style.top = newY + 'px';
        banner.style.right = 'auto';
        banner.style.transform = 'none';
        
        e.preventDefault();
    });

    banner.addEventListener('touchend', function(e) {
        if (!isDragging) return;
        
        isDragging = false;
        banner.style.transition = 'all 0.3s ease';
        
        // Snap to edges
        const rect = banner.getBoundingClientRect();
        const viewportWidth = window.innerWidth;
        
        if (rect.right > viewportWidth - 50) {
            banner.style.left = 'auto';
            banner.style.right = '20px';
            banner.style.top = '50%';
            banner.style.transform = 'translateY(-50%)';
        } else if (rect.left < 50) {
            banner.style.left = '20px';
            banner.style.right = 'auto';
            banner.style.top = '50%';
            banner.style.transform = 'translateY(-50%)';
        }
        
        if (!isMinimized) {
            startAutoMinimizeTimer();
        }
    });

    // Start the auto-minimize timer when page loads
    startAutoMinimizeTimer();
});
</script>

</body>

</html>